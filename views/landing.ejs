<!DOCTYPE html>

<html lang="en">

<head>
    <title>Rating Predictor</title>
    <link rel="stylesheet" href="/css/landing.css">
    <link rel="icon" href="/images/favicon.png">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144934197-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-144934197-1');
    </script>
</head>

<body>
    <div class="container" style="display: flex; justify-content: center;">
        <div class="card-coloumns" style="margin-top: 10px">

            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <h3>Codechef Rating Predictor</h3>
                        </div>
                        <div class="col-sm-4">
                            <a href="https://github.com/dush1729/codechef-rating-predictor"
                                class="btn btn-primary btn-block" role="button">Github</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 10px">
                <div class="card-body">
                    <form id="form" onsubmit="saveUserAndRefresh()">
                        <div class="row">
                            <div class="col-sm-8">
                                <input id="user" class="form-control" type="text" placeholder="Username"
                                    value="<%= user %>">
                            </div>
                            <div class="col-sm-4">
                                <a id="fetchButton" class="btn btn-primary btn-block" href="" role="button">Fetch</a>
                            </div>
                        </div>
                    </form>

                    <div class="table table-responsive" style="margin-top: 10px">
                        <table class="table table-dark">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Contest</th>
                                    <th>Type</th>
                                    <th>Seed</th>
                                    <th>#</th>
                                    <th>Old</th>
                                    <th>New</th>
                                    <th>Delta</th>
                                    <th>Last Updated</th>
                                </tr>
                            </thead>

                            <tbody>
                                <% result.forEach((user) => { %>
                                <% var change = user.rating - user.previous %>
                                <tr <% if(change > 0) { %> class="bg-success" <% } %> <% if(change < 0) { %>
                                    class="bg-danger" <% } %> <% if(change == 0) { %> class="bg-primary" <% } %>>
                                    <td><a style="color: white"
                                            href="https://www.codechef.com/<%= user.contest %>"><%= user.contest %></a>
                                    </td>
                                    <td><%= user.type %></td>
                                    <td><%= user.erank %></td>
                                    <td><%= user.rank %></td>
                                    <td><%= user.previous %></td>
                                    <td><%= user.rating %></td>
                                    <td><%= change %></td>
                                    <td><%= user.elapsed %></td>
                                </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 10px">
                <div class="card-body">

                    <div class="row">
                        <div class="col-sm-8">
                            <h3>Select Contest</h3>
                        </div>
                        <div class="col-sm-4">
                            <a id="predictButton" class="btn btn-primary btn-block" href="" role="button">
                                Ranklist
                            </a>
                        </div>
                    </div>

                    <div class="row" style="margin-top:10px; margin-bottom: 100px;">
                        <div class="col-sm-4 text-center">
                            <select id="contestType" class="btn btn-outline-danger btn-lg">
                                <option value="1">Long</option>
                                <option value="2">CookOff</option>
                                <option value="3">LunchTime</option>
                            </select>
                        </div>
                        <div class="col-sm-4 text-center">
                            <select id="contestDivision" class="btn btn-outline-warning btn-lg">
                                <option value="1">Division 1</option>
                                <option value="2">Division 2</option>
                            </select>
                        </div>
                        <div class="col-sm-4 text-center">
                            <select id="ratingType" class="btn btn-outline-info btn-lg">
                                <option value="1">All</option>
                                <option value="2">Individual</option>
                            </select>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="/js/landing.js"></script>
</body>

</html>